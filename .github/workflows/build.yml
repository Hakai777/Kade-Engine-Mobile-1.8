name: Test Haxe install

on:
  workflow_dispatch:

jobs:
  test-haxe:
    runs-on: ubuntu-latest
    env:
      HAXE_VERSION: "4.3.4"
    steps:
      - name: Download Haxe
        run: |
          HAXE_TAR="haxe-${HAXE_VERSION}-linux64.tar.gz"
          wget -q https://github.com/HaxeFoundation/haxe/releases/download/${HAXE_VERSION}/$HAXE_TAR -O /tmp/$HAXE_TAR
          ls -lh /tmp/$HAXE_TAR

      - name: Extract and install Haxe
        run: |
          tar -xzf /tmp/haxe-${HAXE_VERSION}-linux64.tar.gz -C /tmp
          ls -lh /tmp
          sudo mv /tmp/haxe-${HAXE_VERSION} /opt/haxe
          sudo ln -sf /opt/haxe/haxe /usr/local/bin/haxe
          sudo ln -sf /opt/haxe/haxelib /usr/local/bin/haxelib
          haxe --version
